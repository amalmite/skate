<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add bird</title>
</head>
<body>
<form method="post" id="outer-form">
{% csrf_token %}
{{ outer_form.as_p }}

<h3>Inner Repeaters</h3>
<div id="inner-formsets">
{{ inner_formset.management_form }}
<div class="inner-formset">
    {% for form in inner_formset %}
        {{ form.as_p }}
    {% endfor %}
</div>
</div>

<button type="submit">Submit</button>
<button type="button" id="add-inner-formset">Add More</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
document.getElementById('add-inner-formset').addEventListener('click', function() {
    var innerFormsetsContainer = document.getElementById('inner-formsets');
    var managementForm = innerFormsetsContainer.querySelector('input[name$="TOTAL_FORMS"]');
    var totalFormCount = parseInt(managementForm.value);

    var newFormset = document.createElement('div');
    newFormset.classList.add('inner-formset');
    newFormset.innerHTML = '{{ inner_formset.empty_form.as_p|escapejs }}';

    innerFormsetsContainer.appendChild(newFormset);
    managementForm.value = totalFormCount + 1;
});
});
</script>

</body>
</html>


